var V=Object.defineProperty;var k=Object.getOwnPropertySymbols;var q=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var v=(e,n,a)=>n in e?V(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,L=(e,n)=>{for(var a in n||(n={}))q.call(n,a)&&v(e,a,n[a]);if(k)for(var a of k(n))A.call(n,a)&&v(e,a,n[a]);return e};import{i as B}from"./axios.b2708331.js";import{A as z,H as G,Q}from"./index.4a68db45.js";import{C as R}from"./custom_column.9559192c.js";import{_ as E,r as C,L as F,c as H,b,d,e as h,f as s,t as i,x as N,m as T,F as g,h as f,l as I,n as K,N as S,s as u,y as j}from"./index.96fbe964.js";var D={index:e=>B({url:`/queries/${e}/results`})};const M=C([]),J=async()=>{try{const{data:{data:e}}=await R.index();M.value=e}catch(e){console.log(e)}},O={components:{GoogleMap:z,Marker:G},setup(){const e="AIzaSyBnb8imIfiw8JHV1h-Fty9aZ-r1YVTznnc",n=F(),a=C({}),o=C([]),x=async()=>{const t=n.params.id,{data:{data:l}}=await Q.show(t);a.value=l},w=async()=>{try{const t=n.params.id,{data:{data:l}}=await D.index(t);o.value=l.map(r=>{const c=[];return r.tag==="\u512A"?c.push("text-danger"):r.tag==="\u52A3"?c.push("text-secondary"):c.push("text-info"),L({classList:c},r)})}catch(t){console.log(t)}},m=t=>t.classList.join(" "),p=t=>{S(t.number),["text-line-through","bg-dark"].forEach(r=>{const c=t.classList.indexOf(r);c>-1?t.classList.splice(c,1):t.classList.push(r)})},y=()=>{o.value.forEach(t=>{t.classList=t.classList.filter(l=>!["text-line-through","bg-dark"].includes(l))})},_=H(()=>{var c;if(!((c=a.value)!=null&&c.latlng))return{lat:25.0391667,lng:121.5641667};let t=a.value.latlng;const l=Number(t.split(",")[0]),r=Number(t.split(",")[1]);return{lat:l,lng:r}});return J(),w(),x(),{apiKey:e,query:a,results:o,showClass:m,copyToClipboard:p,disableAllLineThrough:y,center:_,custom_columns:M}}},Y={class:"container-fluid mt-5 pt-3"},Z={class:"row"},P={class:"col-8"},U={class:"text-danger"},W={class:"text-muted"},X=j(" \u56DE\u641C\u5C0B "),$={class:"table table-striped"},tt=s("th",null,"\u8A3B\u8A18",-1),st=s("th",null,"\u7DE8\u865F",-1),ot=s("th",null,"\u670D\u52D9\u7DB2\u540D\u5B57",-1),et=s("th",null,"\u71DF\u696D\u6642\u9593",-1),nt=s("th",null,"\u8DEF\u5F91\u8DDD\u96E2",-1),at=s("th",null,"\u5E38\u5099\u8F2A\u80CE\u898F\u683C",-1),lt=s("th",null,"..",-1),ct=["onClick"],it={class:"col-4"},rt=s("h3",{class:"mt-5 text-muted"}," \u5730\u5716\u50C5\u4F9B\u53C3\u8003 ",-1);function dt(e,n,a,o,x,w){var _;const m=b("router-link"),p=b("Marker"),y=b("GoogleMap");return d(),h("div",Y,[s("div",Z,[s("div",P,[s("h1",U," \u641C\u5C0B\u5730\u9EDE\uFF1A "+i(o.query.address),1),s("h3",W," Google\u5730\u9EDE\uFF1A "+i(o.query.geo_location),1),N(m,{class:"btn btn-primary",to:"/"},{default:T(()=>[X]),_:1}),s("button",{type:"button",class:"btn btn-info mx-5",onClick:n[0]||(n[0]=(...t)=>o.disableAllLineThrough&&o.disableAllLineThrough(...t))}," \u53D6\u6D88\u5168\u90E8\u522A\u9664\u7DDA "),s("table",$,[s("thead",null,[s("tr",null,[tt,st,ot,et,nt,at,(d(!0),h(g,null,f(o.custom_columns,t=>(d(),h("th",{key:`column-${t.id}`},i(t.name),1))),128)),lt])]),s("tbody",null,[(d(!0),h(g,null,f(o.results,t=>(d(),h("tr",{key:t.name,class:"item"},[s("td",{class:u(o.showClass(t))},i(t.tag),3),s("td",{class:u(o.showClass(t))},i(t.number),3),s("td",{class:u(o.showClass(t))},i(t.name),3),s("td",{class:u(o.showClass(t))},i(t.business_time),3),s("td",{class:u(o.showClass(t))},i(t.distance_text),3),s("td",{class:u(o.showClass(t)),style:{"white-space":"pre-wrap"}},i(t.common_tire),3),(d(!0),h(g,null,f(o.custom_columns,l=>(d(),h("td",{key:`column_${l.id}`,class:u(o.showClass(t)),style:{"white-space":"pre-wrap"}},i(t[`custom_${l.id}`]),3))),128)),s("td",null,[s("button",{type:"button",class:"copy btn btn-sm btn-outline-success",onClick:l=>o.copyToClipboard(t)}," \u8907\u88FD ",8,ct)])]))),128))])])]),s("div",it,[rt,(_=o.query)!=null&&_.latlng?(d(),I(y,{key:0,"api-key":o.apiKey,style:{width:"100%",height:"500px"},center:o.center,zoom:15},{default:T(()=>[N(p,{options:{position:o.center}},null,8,["options"])]),_:1},8,["api-key","center"])):K("",!0)])])])}var yt=E(O,[["render",dt]]);export{yt as default};
